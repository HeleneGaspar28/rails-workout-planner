<div class="container py-4">
  <!-- Back -->
  <div class="mb-4">
    <%= link_to "← Back to Routines", routines_path, class: "text-decoration-none text-secondary" %>
  </div>

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="fw-bold mb-0 text-primary"><%= @routine.name %></h1>
    <div class="d-flex align-items-center">
      <%= button_to "Delete",
              routine_path(@routine),
              method: :delete,
              data: { confirm: "Delete this routine?" },
              class: "btn btn-outline-danger" %>
    </div>
  </div>

  <!-- Image -->
  <% if @routine.photo.attached? %>
    <div class="mb-4 text-center">
      <%= image_tag @routine.photo,
                    class: "img-fluid rounded shadow-sm",
                    style: "width:100%; max-height:400px; object-fit:cover;" %>
    </div>
  <% end %>

  <!-- Exercises -->
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0 ms-1">Exercises</h4>
        <span class="text-muted me-1"><%= pluralize(@assignments.size, "exercise") %></span>
      </div>

      <% if @assignments.any? %>
        <div class="list-group">
          <% @assignments.each do |assignment| %>
            <div class="list-group-item px-3 py-3">
              <div class="d-flex justify-content-between align-items-start">
                <div class="me-3 text-start">
                  <h5 class="mb-1 fw-semibold"><%= assignment.exercise.name %></h5>
                  <small class="text-muted d-block mb-1">
                    <%= assignment.exercise.category.capitalize %> •
                    <%= assignment.exercise.equipment.capitalize %> •
                    <%= assignment.exercise.difficulty.capitalize %>
                  </small>
                  <% if assignment.note.present? %>
                    <p class="mb-0 text-muted fst-italic"><%= assignment.note %></p>
                  <% end %>
                </div>

                <div class="text-end">
                  <% if assignment.sets.present? && assignment.reps.present? %>
                    <span class="badge bg-primary rounded-pill">
                      <%= assignment.sets %>&times;<%= assignment.reps %>
                    </span>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-muted mb-0">
          No exercises yet. <%= link_to "Add one", new_routine_assignment_path(@routine) %>.
        </p>
      <% end %>
    </div>
  </div>
</div>
